(()=>{var e={519:(e,t,n)=>{"use strict";function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}n.d(t,{Z:()=>o});var r=n(934),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.PANEL_ELEMENTS=[],this.TWITTER_FEED_CHILD_NODE=null,this.feedIntervalId=0,this.pageInterval=0,this.initialLoad=!1,this.TWITTER_FEED_FRAME_HEIGHT="1000px",this.TWITTER_FEED_FRAME_WIDTH="598px",this.TWITTER_PANEL_FRAME_HEIGHT="4000px",this.TWITTER_PANEL_FRAME_WIDTH="350px",this.IFRAME_ClASS="focus-card";var t=this.initIframeTwitter();this.feedIframe=t[0],this.panelIframe=t[1]}var t,n,o;return t=e,(n=[{key:"initIframeTwitter",value:function(){var e=document.createElement("iframe"),t=document.createElement("iframe");return e.width=this.TWITTER_FEED_FRAME_WIDTH,e.height=this.TWITTER_FEED_FRAME_HEIGHT,e.className=this.IFRAME_ClASS,t.width=this.TWITTER_PANEL_FRAME_WIDTH,t.height=this.TWITTER_PANEL_FRAME_HEIGHT,t.className=this.IFRAME_ClASS,Object.assign(e.style,{position:"fixed",border:"none"}),Object.assign(t.style,{position:"fixed",border:"none"}),[e,t]}},{key:"clearPanelElements",value:function(){this.PANEL_ELEMENTS=[]}},{key:"focusTwitterPanel",value:function(){this.pageInterval=setInterval(this.tryBlockingTwitterPanel.bind(this),700)}},{key:"setFeedIframeSource",value:function(){"rgb(0, 0, 0)"==document.body.style.backgroundColor?this.feedIframe.src=chrome.runtime.getURL("www/twitter/feed/twitterFeedDark.html"):"rgb(21, 32, 43)"==document.body.style.backgroundColor?(console.log("Setting dark mode cards"),this.feedIframe.src=chrome.runtime.getURL("www/twitter/feed/twitterFeedDim.html")):this.feedIframe.src=chrome.runtime.getURL("www/twitter/feed/twitterFeed.html")}},{key:"setPanelIframeSource",value:function(){"rgb(0, 0, 0)"==document.body.style.backgroundColor||"rgb(21, 32, 43)"==document.body.style.backgroundColor?this.panelIframe.src=chrome.runtime.getURL("www/twitter/panel/twitterPanelDark.html"):this.panelIframe.src=chrome.runtime.getURL("www/twitter/panel/twitterPanel.html")}},{key:"focusTwitter",value:function(){console.log("setting interval to block twitter"),this.initialLoad?this.feedIntervalId=setInterval(this.tryBlockingTwitterHome.bind(this),100):(this.feedIntervalId=setInterval(this.tryBlockingTwitterHome.bind(this),500),this.initialLoad=!this.initialLoad)}},{key:"toggleTwitterHomeDistractions",value:function(e){console.log("here we are in toggle twitter distraction"),console.log("should hide is: "+e);try{e?(this.hideTwitterFeed(!0),this.hideTwitterPanel(!0),this.injectCards("home")):(this.hideTwitterFeed(!1),this.hideTwitterPanel(!1))}catch(e){console.log(e)}}},{key:"hideTwitterFeed",value:function(e){var t=r.getTwitterFeed();e?(console.log("want to hide feed"),this.TWITTER_FEED_CHILD_NODE=t.children[0],t.removeChild(t.childNodes[0])):(console.log("want to show feed"),t.append(this.TWITTER_FEED_CHILD_NODE))}},{key:"hideTwitterPanel",value:function(e){var t=r.getTwitterPanel();if(e){for(var n=t.children.length;1!=n;){var i=t.lastChild;this.PANEL_ELEMENTS.push(i),t.removeChild(i),n-=1}this.injectCards("panel")}else{for(var o=0;o<this.PANEL_ELEMENTS.length;o+=1)t.append(this.PANEL_ELEMENTS[o]);this.clearPanelElements()}}},{key:"tryBlockingTwitterHome",value:function(){if(console.log("we are trying to block twitter home"),this.distractionsHidden("home"))return console.log("we can clear the interval"),console.log(this.feedIntervalId),clearInterval(this.feedIntervalId),void(this.initialLoad=!1);console.log("distractions are not hidden");try{r.homePageTwitterHasLoaded()&&(console.log("here in blocking twitter"),this.toggleTwitterHomeDistractions(!0))}catch(e){console.log(e),console.log("Feed hasn't been loaded yet")}}},{key:"tryBlockingTwitterPanel",value:function(){if(console.log("we are trying to block twitter panel"),this.distractionsHidden("panel"))return console.log("we can clear the interval"),console.log(this.pageInterval),void clearInterval(this.pageInterval);try{r.hasTwitterPanelLoaded()&&(console.log("here in blocking twitter panel"),this.hideTwitterPanel(!0))}catch(e){console.log("Panel hasn't been loaded yet")}}},{key:"distractionsHidden",value:function(e){try{console.log("I am in the distractions function");var t=r.getTwitterPanel();return console.log(t),"home"==e?"IFRAME"==r.getTwitterFeed().children[0].nodeName&&2==t.children.length:2==t.children.length}catch(e){}}},{key:"injectCards",value:function(e){this.setPanelIframeSource(),"home"==e&&(this.setFeedIframeSource(),r.getTwitterFeed().append(this.feedIframe)),r.getTwitterPanel().append(this.panelIframe)}}])&&i(t.prototype,n),o&&i(t,o),e}()},934:e=>{function t(){return document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[0].children[0].children[3]}function n(){return document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[1].children[0].children[1].children[0].children[0].children[0]}e.exports={homePageTwitterHasLoaded:function(){return n()&&t()},getTwitterFeedClassName:function(){var e=t();if(null!=e)return e.className;throw"feed class name not found!"},hasTwitterPanelLoaded:function(){var e=n();return 5==e.children.length||2==e.children.length},getTwitterPanel:n,getTwitterFeed:t}}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,n),o.exports}n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e,t,i=n(519);function r(n){console.log(n);var i=n.status,r=n.method,l=n.url;"focus"==i?l.includes("twitter")?(e.clearPanelElements(),"initial"==r?e.focusTwitter():"hidePanels"==r?e.focusTwitterPanel():e.toggleTwitterHomeDistractions(!0)):l.includes("linkedin")&&(console.log("about to focus on linkedin"),t.focusLinkedIn()):"unfocus"==n.status&&(l.includes("twitter")?(l.includes("/home")?(console.log("about to un-focus on Twitter"),o(),e.toggleTwitterHomeDistractions(!1)):e.hideTwitterPanel(!1),o()):l.includes("linkedin")&&(console.log("about to un-focus on linkedin"),t.toggleLinkedInHomeDistractions(!1)))}function o(){try{var e=document.getElementsByClassName("focus-card");Array.prototype.forEach.call(e,(function(e){e.remove()}))}catch(e){console.log(e),console.log("the iframe is not on the screen")}}chrome.runtime.connect({name:"Focused Browsing"}).onMessage.addListener(r),e=new i.Z})()})();