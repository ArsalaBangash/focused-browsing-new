(()=>{var e,o,n,l,t="",c="",i="hidden",s="visible",r="self-focused ember-view",a="focus-card",d=window.location.toString(),u=!1;function m(e){console.log(e);var o=e.status,n=e.method,l=e.url;"focus"==o?"removeIframe"==n?(f(),b=!1):l.includes("twitter")?("initial"==n?(console.log("setting interval to block twitter"),u?(v=setInterval(N,1e3),u=!1):v=setInterval(N,100)):w(!0),g()):l.includes("linkedin")&&(console.log("about to focus on linkedin"),g(),y(!0)):"unfocus"==e.status&&(l.includes("twitter")?(console.log("about to un-focus on Twitter"),w(!1)):l.includes("linkedin")&&(console.log("about to un-focus on linkedin"),y(!1)))}function g(){e.src=chrome.runtime.getURL("www/card.html"),console.log(e)}function h(){e.width="120px",e.height="100px",e.id=a,Object.assign(e.style,{position:"fixed",border:"none",zIndex:"10000"}),console.log("before we inject iframe here is the feed parent"),console.log(n)}function f(){try{document.getElementById(a).remove()}catch(e){console.log("the iframe is not on the screen")}}function y(e){console.log("here in this linkedIn function");try{e?(console.log("about to hide linkedIn feed"),document.getElementsByClassName(r)[0].style.visibility=i,h()):(console.log("about to make linkedIn feed visible"),document.getElementsByClassName(r)[0].style.visibility=s,f())}catch(e){console.log(e)}}o=chrome.runtime.connect({name:"Focused Browsing"}),console.log(d),o.postMessage({url:d}),o.onMessage.addListener(m),console.log("welcome to the content script"),e=document.createElement("iframe"),console.log(e);var v,b=!1;function w(e){console.log("here we are in toggle twitter distraction"),console.log("should hide is: "+e);try{t=function(){var e=E();if(console.log(e),null!=e)return e.className;throw"feed class name not found!"}(),c=function(){var e=C();if(console.log(e),null!=e)return e.className;throw"panel class name not found!"}(),console.log(t),console.log(c),e?(k(!0),B(!0),h(),b=!0):(console.log("here is our un focus block of code"),k(!1),B(!1),b=!1,f())}catch(e){console.log(e)}}function N(){if(console.log("we are trying to block twitter home"),b)return console.log("we can clear the interval"),console.log(v),void clearInterval(v);try{C()&&E()&&(console.log("here in blocking twitter"),w(!0))}catch(e){console.log("Feed hasn't been loaded yet")}}function k(e){e?(n=document.getElementsByClassName(t)[1],l=document.getElementsByClassName(t)[1].children[0],n.removeChild(n.childNodes[0]),console.log(l)):(console.log(l),n.append(l))}function B(e){e?(document.getElementsByClassName(c)[0].style.visibility=i,document.getElementsByClassName(c)[2].style.visibility=i,console.log(document.getElementsByClassName(c)[0]),console.log(document.getElementsByClassName(c)[2])):(document.getElementsByClassName(c)[0].style.visibility=s,document.getElementsByClassName(c)[1].style.visibility=s)}function E(){return document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[0].children[0].children[3]}function C(){return document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[1].children[0].children[1].children[0].children[0].children[0].children[2]}})();