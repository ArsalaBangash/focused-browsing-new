(()=>{var e,n,o,l="",t="",c="hidden",i="visible",r="self-focused ember-view",s="focus-card",d=window.location.toString(),u=!1,a=null;function h(e){console.log(e);var n=e.status,o=e.method,l=e.url;"focus"==n?"removeIframe"==o?w=!1:l.includes("twitter")?("initial"==o?(console.log("setting interval to block twitter"),v=u?setInterval(E,1e3):setInterval(E,100)):b(!0),g()):l.includes("linkedin")&&(console.log("about to focus on linkedin"),g(),y(!0)):"unfocus"==e.status&&(l.includes("twitter")?(console.log("about to un-focus on Twitter"),b(!1)):l.includes("linkedin")&&(console.log("about to un-focus on linkedin"),y(!1)))}function g(){e.src=chrome.runtime.getURL("www/card.html"),console.log(e)}function m(){e.width="120px",e.height="100px",e.id=s,Object.assign(e.style,{position:"fixed",border:"none",zIndex:"10000"}),o.append(e)}function f(){try{document.getElementById(s).remove()}catch(e){console.log("the iframe is not on the screen")}}function y(e){console.log("here in this linkedIn function");try{e?(console.log("about to hide linkedIn feed"),document.getElementsByClassName(r)[0].style.visibility=c,m()):(console.log("about to make linkedIn feed visible"),document.getElementsByClassName(r)[0].style.visibility=i,f())}catch(e){console.log(e)}}n=chrome.runtime.connect({name:"Focused Browsing"}),console.log(d),n.postMessage({url:d}),n.onMessage.addListener(h),console.log("welcome to the content script"),e=document.createElement("iframe"),console.log(e);var v,w=!1;function b(e){console.log("here we are in toggle twitter distraction"),console.log("should hide is: "+e);try{l=function(){var e=p();if(console.log(e),null!=e)return e.className;throw"feed class name not found!"}(),t=function(){var e=C();if(console.log(e),null!=e)return e.className;throw"panel class name not found!"}(),console.log(l),console.log(t),e?(I(!0),T(!0),k(!0),m(),w=!0):(console.log("here is our un focus block of code"),I(!1),T(!1),k(!1),w=!1,f())}catch(e){console.log(e)}}function E(){if(console.log("we are trying to block twitter home"),w)return console.log("we can clear the interval"),console.log(v),clearInterval(v),void(u=!1);try{C()&&p()&&D()&&(console.log("here in blocking twitter"),b(!0))}catch(e){console.log("Feed hasn't been loaded yet")}}function I(e){e?(o=document.getElementsByClassName(l)[1],TWITTER_FEED_CHILD=document.getElementsByClassName(l)[1].children[0],o.removeChild(o.childNodes[0]),console.log(TWITTER_FEED_CHILD)):(console.log(TWITTER_FEED_CHILD),o.append(TWITTER_FEED_CHILD))}function T(e){document.getElementsByClassName(t)[0].style.visibility=e?c:i}function k(e){e?(a||(a=D()),a.style.visibility=c):a.style.visibility=i}function p(){return document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[0].children[0].children[3]}function C(){return document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[1].children[0].children[1].children[0].children[0].children[0].children[2]}function D(){var e=3;return u||(console.log("here"),e=4),console.log(document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[1].children[0].children[1].children[0].children[0].children[0].children[e]),document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[1].children[0].children[1].children[0].children[0].children[0].children[e]}})();