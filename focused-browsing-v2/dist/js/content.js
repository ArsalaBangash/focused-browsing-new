(()=>{var e,o,n,l="",t="self-focused ember-view",c="focus-card",s=window.location.toString(),r=!1;function d(e){console.log(e);var o=e.status,n=e.method,l=e.url;"focus"==o?l.includes("twitter")?("initial"==n?(console.log("setting interval to block twitter"),m=r?setInterval(w,1e3):setInterval(w,100)):"hidePanels"==n?(E(!0),f=!1):v(!0),h()):l.includes("linkedin")&&(console.log("about to focus on linkedin"),h(),g(!0)):"unfocus"==e.status&&(l.includes("twitter")?(console.log("about to un-focus on Twitter"),v(!1)):l.includes("linkedin")&&(console.log("about to un-focus on linkedin"),g(!1)))}function h(){e.src=chrome.runtime.getURL("www/card.html"),console.log(e)}function a(){e.width="120px",e.height="100px",e.id=c,Object.assign(e.style,{position:"fixed",border:"none",zIndex:"10000"}),n.append(e)}function u(){try{document.getElementById(c).remove()}catch(e){console.log("the iframe is not on the screen")}}function g(e){console.log("here in this linkedIn function");try{e?(console.log("about to hide linkedIn feed"),document.getElementsByClassName(t)[0].style.visibility="hidden",a()):(console.log("about to make linkedIn feed visible"),document.getElementsByClassName(t)[0].style.visibility="visible",u())}catch(e){console.log(e)}}o=chrome.runtime.connect({name:"Focused Browsing"}),console.log(s),o.postMessage({url:s}),o.onMessage.addListener(d),console.log("welcome to the content script"),e=document.createElement("iframe"),console.log(e);var m,f=!1;function v(e){console.log("here we are in toggle twitter distraction"),console.log("should hide is: "+e);try{l=function(){var e=b();if(console.log(e),null!=e)return e.className;throw"feed class name not found!"}(),console.log(l),e?(y(!0),E(!0),a(),f=!0):(console.log("here is our un focus block of code"),y(!1),E(!1),f=!1,u())}catch(e){console.log(e)}}function w(){if(console.log("we are trying to block twitter home"),f)return console.log("we can clear the interval"),console.log(m),clearInterval(m),void(r=!1);try{e=I(),console.log(e.children.length),console.log(e.children),console.log(e.children.length),5==e.children.length&&b()&&(console.log("here in blocking twitter"),v(!0))}catch(e){console.log("Feed hasn't been loaded yet")}var e}function y(e){e?(n=document.getElementsByClassName(l)[1],TWITTER_FEED_CHILD=document.getElementsByClassName(l)[1].children[0],n.removeChild(n.childNodes[0]),console.log(TWITTER_FEED_CHILD)):(console.log(TWITTER_FEED_CHILD),n.append(TWITTER_FEED_CHILD))}function E(e){if(e){var o=I();for(console.log("here are the panels children"),console.log(o.children),console.log(o.children.length),i=4;o.children.length>1;)o.removeChild(o.children[i]),i-=1}}function b(){return document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[0].children[0].children[3]}function I(){return document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[1].children[0].children[1].children[0].children[0].children[0]}})();