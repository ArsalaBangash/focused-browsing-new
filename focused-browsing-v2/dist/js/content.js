(()=>{var e,o,n="",l="",t="hidden",i="visible",c="self-focused ember-view",s="focus-card",r=window.location.toString(),d=!1;function a(e){console.log(e);var o=e.status,n=e.method,l=e.url;"focus"==o?"removeIframe"==n?(m(),y=!1):l.includes("twitter")?("initial"==n?(console.log("setting interval to block twitter"),d?(f=setInterval(v,1e3),d=!1):f=setInterval(v,100)):b(!0),u()):l.includes("linkedin")&&(console.log("about to focus on linkedin"),u(),h(!0)):"unfocus"==e.status&&(l.includes("twitter")?(console.log("about to un-focus on Twitter"),b(!1)):l.includes("linkedin")&&(console.log("about to un-focus on linkedin"),h(!1)))}function u(){e.src=chrome.runtime.getURL("www/card.html"),console.log(e)}function g(){e.width="120px",e.height="100px",e.id=s,Object.assign(e.style,{position:"fixed",border:"none",zIndex:"10000"}),document.body.prepend(e),console.log(e)}function m(){try{document.getElementById(s).remove()}catch(e){console.log("the iframe is not on the screen")}}function h(e){console.log("here in this linkedIn function");try{e?(console.log("about to hide linkedIn feed"),document.getElementsByClassName(c)[0].style.visibility=t,g()):(console.log("about to make linkedIn feed visible"),document.getElementsByClassName(c)[0].style.visibility=i,m())}catch(e){console.log(e)}}o=chrome.runtime.connect({name:"Focused Browsing"}),console.log(r),o.postMessage({url:r}),o.onMessage.addListener(a),console.log("welcome to the content script"),e=document.createElement("iframe"),console.log(e);var f,y=!1;function b(e){console.log("here we are in toggle twitter distraction"),console.log("should hide is: "+e);try{n=function(){var e=w();if(console.log(e),null!=e)return e.className;throw"feed class name not found!"}(),l=function(){var e=k();if(console.log(e),null!=e)return e.className;throw"panel class name not found!"}(),console.log(n),console.log(l),e?(document.getElementsByClassName(n)[1].style.visibility=t,document.getElementsByClassName(l)[0].style.visibility=t,g(),y=!0):(console.log("here is our un focus block of code"),document.getElementsByClassName(n)[1].style.visibility=i,document.getElementsByClassName(l)[0].style.visibility=i,y=!1,m())}catch(e){console.log(e)}}function v(){if(console.log("we are trying to block twitter home"),y)return console.log("we can clear the interval"),console.log(f),void clearInterval(f);try{k()&&w()&&(console.log("here in blocking twitter"),b(!0))}catch(e){console.log("Feed hasn't been loaded yet")}}function w(){return document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[0].children[0].children[3]}function k(){return document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[1].children[0].children[1].children[0].children[0].children[0].children[2]}})();