(()=>{var e,o,n,l="",c="self-focused ember-view",t="focus-card",i=window.location.toString(),s=!1,r=[];function d(e){console.log(e);var o=e.status,n=e.method,l=e.url;"focus"==o?l.includes("twitter")?("initial"==n?(console.log("setting interval to block twitter"),m=s?setInterval(E,1e3):setInterval(E,100)):"hidePanels"==n?(I(!0),hideTopicsToFollow(!0),f=!1):v(!0),h()):l.includes("linkedin")&&(console.log("about to focus on linkedin"),h(),u(!0)):"unfocus"==e.status&&(l.includes("twitter")?(console.log("about to un-focus on Twitter"),v(!1)):l.includes("linkedin")&&(console.log("about to un-focus on linkedin"),u(!1)))}function h(){e.src=chrome.runtime.getURL("www/card.html"),console.log(e)}function a(){e.width="120px",e.height="100px",e.id=t,Object.assign(e.style,{position:"fixed",border:"none",zIndex:"10000"}),n.append(e)}function g(){try{document.getElementById(t).remove()}catch(e){console.log("the iframe is not on the screen")}}function u(e){console.log("here in this linkedIn function");try{e?(console.log("about to hide linkedIn feed"),document.getElementsByClassName(c)[0].style.visibility="hidden",a()):(console.log("about to make linkedIn feed visible"),document.getElementsByClassName(c)[0].style.visibility="visible",g())}catch(e){console.log(e)}}o=chrome.runtime.connect({name:"Focused Browsing"}),console.log(i),o.postMessage({url:i}),o.onMessage.addListener(d),console.log("welcome to the content script"),e=document.createElement("iframe"),console.log(e);var m,f=!1;function v(e){console.log("here we are in toggle twitter distraction"),console.log("should hide is: "+e);try{l=function(){var e=y();if(console.log(e),null!=e)return e.className;throw"feed class name not found!"}(),console.log(l),e?(w(!0),I(!0),a(),f=!0):(console.log("here is our un focus block of code"),w(!1),I(!1),f=!1,g())}catch(e){console.log(e)}}function E(){if(console.log("we are trying to block twitter home"),f)return console.log("we can clear the interval"),console.log(m),clearInterval(m),void(s=!1);try{e=T(),console.log(e.children.length),console.log(e.children),console.log(e.children.length),5==e.children.length&&y()&&(console.log("here in blocking twitter"),v(!0))}catch(e){console.log("Feed hasn't been loaded yet")}var e}function w(e){e?(n=document.getElementsByClassName(l)[1],TWITTER_FEED_CHILD=document.getElementsByClassName(l)[1].children[0],n.removeChild(n.childNodes[0]),console.log(TWITTER_FEED_CHILD)):(console.log("APPENDING TWITTER_FEED_CHILD"),console.log(TWITTER_FEED_CHILD),n.append(TWITTER_FEED_CHILD))}function I(e){var o=T();if(console.log("PANEL IS"),console.log(o),e){console.log("here are the panels children"),console.log(o.children),console.log(o.children.length);for(var n=4;o.children.length>1;){var l=o.children[n].cloneNode(!0);r.push(l),o.removeChild(o.children[n]),n-=1}console.log(r)}else{var c=3;for(console.log(o.children);c>=0;)console.log("first element is"),console.log(r[c]),o.append(r[c]),c-=1}}function y(){return document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[0].children[0].children[3]}function T(){return document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[1].children[0].children[1].children[0].children[0].children[0]}})();