(()=>{var e,n,o,l="",t="self-focused ember-view",c="focus-card",i=window.location.toString(),r=!1,s=[],d=!1,a=!1;function u(e){console.log(e);var n=e.status,o=e.method,l=e.url;"focus"==n?l.includes("twitter")?("initial"==o?(console.log("setting interval to block twitter"),r?(console.log("1000 interval"),v=setInterval(b,1e3)):v=setInterval(b,100),a=!1):"hidePanels"==o?(s=[],y=setInterval(p,200),d=!1):(w(!0),a=!1),h()):l.includes("linkedin")&&(console.log("about to focus on linkedin"),h(),f(!0)):"unfocus"==e.status&&(l.includes("twitter")?(console.log("about to un-focus on Twitter"),w(!1)):l.includes("linkedin")&&(console.log("about to un-focus on linkedin"),f(!1)))}function h(){e.src=chrome.runtime.getURL("www/card.html"),console.log(e)}function g(){e.width="120px",e.height="100px",e.id=c,Object.assign(e.style,{position:"fixed",border:"none",zIndex:"10000"}),o.append(e)}function m(){try{document.getElementById(c).remove()}catch(e){console.log("the iframe is not on the screen")}}function f(e){console.log("here in this linkedIn function");try{e?(console.log("about to hide linkedIn feed"),document.getElementsByClassName(t)[0].style.visibility="hidden",g()):(console.log("about to make linkedIn feed visible"),document.getElementsByClassName(t)[0].style.visibility="visible",m())}catch(e){console.log(e)}}n=chrome.runtime.connect({name:"Focused Browsing"}),console.log(i),n.postMessage({url:i}),n.onMessage.addListener(u),console.log("welcome to the content script"),e=document.createElement("iframe"),console.log(e);var v;d=!1;function w(e){console.log("here we are in toggle twitter distraction"),console.log("should hide is: "+e);try{l=function(){var e=E();if(console.log(e),null!=e)return e.className;throw"feed class name not found!"}(),e?(I(!0),k(!0),g(),d=!0):(I(!1),k(!1),d=!1,m())}catch(e){console.log(e)}}var y;a=!1;function b(){if(console.log("we are trying to block twitter home"),d)return console.log("we can clear the interval"),console.log(v),clearInterval(v),void(r=!1);try{N()&&E()&&(console.log("here in blocking twitter"),w(!0))}catch(e){console.log("Feed hasn't been loaded yet")}}function p(){if(console.log("we are trying to block twitter panel"),a)return console.log("we can clear the interval"),console.log(v),void clearInterval(y);try{N()&&(console.log("here in blocking twitter panel"),k(!0),a=!0)}catch(e){console.log(e)}}function I(e){e?(o=document.getElementsByClassName(l)[1],TWITTER_FEED_CHILD=document.getElementsByClassName(l)[1].children[0],o.removeChild(o.childNodes[0])):o.append(TWITTER_FEED_CHILD)}function k(e){var n=C();if(e)for(var o=4;n.children.length>1;){var l=n.children[o].cloneNode(!0);s.push(l),n.removeChild(n.children[o]),o-=1}else for(var t=3;t>=0;)n.append(s[t]),t-=1}function E(){return document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[0].children[0].children[3]}function C(){return document.querySelectorAll('[role="main"]')[0].children[0].children[0].children[0].children[1].children[0].children[1].children[0].children[0].children[0]}function N(){return 5==C().children.length}})();