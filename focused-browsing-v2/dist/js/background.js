(()=>{var o,t={twitter:{focus:!0},linkedin:{focus:!0}},e=[];function n(o){return"https://twitter.com/home"===o}function s(o,e){t[o].focus?(console.log("unfocus mode on "+o),i(o,"unfocus",e)):(console.log("focus mode on "+o),i(o,"focus",e)),t[o].focus=!t[o].focus}function i(o,t,n){try{console.log("sending status "+t+" on "+o),chrome.tabs.query({active:!0,currentWindow:!0},(function(o){var s=o[0].url,i=o[0].id;console.log("sending message to this ID"),console.log(i);var c=function(o){return e[o]}(i),r={url:s,status:t,method:n};c.postMessage(r)}))}catch(o){console.log("background script hasn't initialized port")}}chrome.runtime.onConnect.addListener((function(o){console.assert("Focused Browsing"==o.name);var t=o.sender.tab;e[t.id]=o})),chrome.tabs.onUpdated.addListener((function(e,s,c){var r=c.url;s&&"complete"===s.status&&(r.includes("twitter.com")?(console.log(r),console.log(o),t.twitter.focus&&(n(r)?i("twitter","focus","initial"):"https://twitter.com/"!=r&&i("twitter","focus","hidePanels"),o=r)):r.includes("linkedin.com")&&t.linkedin.focus&&i("linkedin","focus","tab")),console.log(s)})),chrome.commands.onCommand.addListener((function(o,t){chrome.tabs.get(t.id,(function(t){var e=t.url;console.log(o),e.includes("twitter.com")?n(e)?(console.log("sending message to twitter"),s("twitter","toggle")):s("twitter","hidePanels"):"https://www.linkedin.com/feed/"===e&&(console.log("sending message to linkedin"),s("linkedin","toggle"))}))})),chrome.runtime.onMessage.addListener((function(t,e,n){console.log(e.tab?"from a content script:"+e.tab.url:"from the extension");var i=(o=e.tab.url).includes("twitter.com")?"twitter":"linkedin";return"focus"==t.status&&s(i,"toggle"),n({enabled:"focus"}),!0}))})();